function updateData(e,r,o){switch("arrangement"==e&&("roommates"==r?($("#roommates-div").show(),$("#roommatesNumberSelect").val("0"),$("#roomSize-div").show(),$("#roomSize").val(""),$("#roomParentUnit-div").show(),$("#roomParentUnit").prop("checked",!1)):($("#roommates-div").hide(),formDataObj.roommates=0,$("#roomSize-div").hide(),formDataObj.roomSize="",$("#roomParentUnit-div").hide(),formDataObj.roomParentUnit=!1)),o){case"number":formDataObj[e]=parseFloat(r);break;default:formDataObj[e]=r}}function processData(){console.log(formDataObj);var e={address:{"default":"",controlDivName:"address-div"},rooms:{"default":0,controlDivName:"rooms-div"},arrangement:{"default":"",controlDivName:"arrangement-div"},roommates:{"default":0,controlDivName:"roommates-div"},renovationLevel:{"default":"",controlDivName:"renovationLevel-div"},apartmentSize:{"default":"",controlDivName:"apartmentSize-div"},roomSize:{"default":"",controlDivName:"roomSize-div"},roomFurniture:{"default":"",controlDivName:"roomFurniture-div"},apartmentFurniture:{"default":"",controlDivName:"apartmentFurniture-div"}},r=!1;for(var o in e)if(fieldObj=e[o],formDataObj[o]==fieldObj.default){if("roommates"==o&&"roommates"!=formDataObj.arrangement){$("#"+fieldObj.controlDivName).removeClass("has-error");continue}$("#"+fieldObj.controlDivName).addClass("has-error"),r=!0}else $("#"+fieldObj.controlDivName).removeClass("has-error");if($("#finalPriceBox").hide(),$("#errorsMessageBox").hide(),$("#emptyFieldsMessageBox").hide(),r)return void $("#emptyFieldsMessageBox").show();if(processingRequest)$("#finalPriceBox").hide();else{var a=new XMLHttpRequest;a.onreadystatechange=function(){if(4==a.readyState&&200==a.status){var e=JSON.parse(a.responseText);if(0==e.statusCode){var r=50;e.lowerBound=Math.floor(e.price/r)*r,e.upperBound=Math.ceil(e.price/r)*r,$("#priceFinal").text(e.lowerBound+(e.lowerBound<e.upperBound?" - "+e.upperBound:"")),$("#finalPriceBox").show()}else{var o="";for(var t in e.errors)o=o.concat("<br/>"),o=o.concat("שגיאה בשדה: ",e.errors[t].component),o=o.concat(", סיבת השגיאה: ",e.errors[t].status);$("#calculationErrors").html(o),$("#errorsMessageBox").show()}processingRequest=!1}},a.open("POST","/calculate",!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),processingRequest=!0,a.send(JSON.stringify(formDataObj))}}var formDataObj={address:"",rooms:0,arrangement:"",roommates:0,floor:0,elevator:!1,bars:!1,renovationLevel:"",apartmentSize:"",roomSize:"",roomParentUnit:!1,solarBoiler:!1,bars:!1,nets:!1,bedRoomAC:!1,livingRoomAC:!1,refrigerator:!1,laundryMachine:!1,laundryDryer:!1,oven:!1,roomFurniture:"",apartmentFurniture:"",garden:!1,balcony:!1,roofBalcony:!1};$("#address").typeahead({hint:!0,highlight:!0,minLength:1,maxItem:8,dynamic:!0,source:{addresses:{url:{type:"GET",url:"/getaddresses/",data:{address:"{{query}}"}}}},callback:{onClickAfter:function(){updateData("address",$("#address").val(),"string")}}});var processingRequest=!1;